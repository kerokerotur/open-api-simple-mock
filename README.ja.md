# open-api-nice-mock

OpenAPIä»•æ§˜ã‹ã‚‰TypeScriptãƒ¢ãƒ‡ãƒ«ã¨ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ã‚’ç”Ÿæˆã™ã‚‹CLIãƒ„ãƒ¼ãƒ«ã€‚

[![CI](https://github.com/yourusername/open-api-nice-mock/workflows/CI/badge.svg)](https://github.com/yourusername/open-api-nice-mock/actions)
[![npm version](https://badge.fury.io/js/open-api-nice-mock.svg)](https://badge.fury.io/js/open-api-nice-mock)
[![codecov](https://codecov.io/gh/yourusername/open-api-nice-mock/branch/main/graph/badge.svg)](https://codecov.io/gh/yourusername/open-api-nice-mock)

## ç‰¹å¾´

- ğŸš€ **TypeScriptãƒ¢ãƒ‡ãƒ«ç”Ÿæˆ** - openapi-generatorã‚’ä½¿ç”¨ã—ã¦OpenAPIä»•æ§˜ã‹ã‚‰ãƒ¢ãƒ‡ãƒ«ç”Ÿæˆ
- ğŸ–¥ï¸ **ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼** - OpenAPIã®ä¾‹ã«åŸºã¥ãè‡ªå‹•ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ
- ğŸ“ **URLæ§‹é€ ãƒ™ãƒ¼ã‚¹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª** - ãƒ¢ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒç°¡å˜
- ğŸ”§ **æŸ”è»Ÿãªè¨­å®š** - openapi-generatorã®å…¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆ
- ğŸ§ª **å®Œå…¨ãªãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸** - 80%ä»¥ä¸Šã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç¶­æŒ
- ğŸ“¦ **ä½¿ã„ã‚„ã™ã„** CLIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install -g open-api-nice-mock
```

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. OpenAPIä»•æ§˜ã‹ã‚‰ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ã‚’ç”Ÿæˆ

```bash
open-api-nice-mock generate your-openapi-spec.json
```

ã“ã‚Œã«ã‚ˆã‚Šä»¥ä¸‹ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ï¼š
- openapi-generatorã‚’ä½¿ç”¨ã—ãŸTypeScriptãƒ¢ãƒ‡ãƒ«ã®ç”Ÿæˆ
- URLæ§‹é€ ã«åŸºã¥ããƒ¢ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
- å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«OpenAPIä»•æ§˜ã‚’ã‚³ãƒ”ãƒ¼

### 2. ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•

```bash
open-api-nice-mock run
```

ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ãŒ `http://localhost:3000` ã§èµ·å‹•ã—ã€OpenAPIä»•æ§˜ã«åŸºã¥ã„ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚

## ä½¿ç”¨æ–¹æ³•

### generateã‚³ãƒãƒ³ãƒ‰

```bash
open-api-nice-mock generate <spec> [options]
```

**å¼•æ•°:**
- `<spec>` - OpenAPIä»•æ§˜ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¾ãŸã¯URL

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³:**
- `-o, --output <dir>` - å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `./generated`ï¼‰
- `-g, --generator-name <name>` - ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼åï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `typescript-node`ï¼‰
- `--additional-properties <props>` - ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã®è¿½åŠ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
- `--global-property <props>` - ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
- `--config <file>` - ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- `--template-dir <dir>` - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- `--auth <auth>` - ä»•æ§˜å–å¾—ç”¨ã®èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼
- `--skip-validate-spec` - å…¥åŠ›ä»•æ§˜ã®æ¤œè¨¼ã‚’ã‚¹ã‚­ãƒƒãƒ—
- `--strict-spec` - ä»•æ§˜ã‚’å³å¯†ã«å‡¦ç†

**ä¾‹:**

```bash
# åŸºæœ¬çš„ãªä½¿ç”¨æ³•
open-api-nice-mock generate ./api/openapi.yaml

# ã‚«ã‚¹ã‚¿ãƒ å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½¿ç”¨
open-api-nice-mock generate ./api/openapi.yaml -o ./my-mocks

# URLã‹ã‚‰è¿½åŠ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨å…±ã«ç”Ÿæˆ
open-api-nice-mock generate https://petstore.swagger.io/v2/swagger.json --additional-properties="npmName=my-client"

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨
open-api-nice-mock generate ./api/openapi.yaml --config ./openapi-config.json
```

### runã‚³ãƒãƒ³ãƒ‰

```bash
open-api-nice-mock run [options]
```

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³:**
- `-p, --port <port>` - ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆç•ªå·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `3000`ï¼‰
- `-d, --dir <dir>` - ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `./generated`ï¼‰
- `-h, --host <host>` - ãƒã‚¤ãƒ³ãƒ‰ã™ã‚‹ãƒ›ã‚¹ãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `localhost`ï¼‰

**ä¾‹:**

```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆ3000ã§èµ·å‹•
open-api-nice-mock run

# ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒˆã§èµ·å‹•
open-api-nice-mock run -p 8080

# ã‚«ã‚¹ã‚¿ãƒ ç”Ÿæˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½¿ç”¨
open-api-nice-mock run -d ./my-generated-files -p 3001
```

## ãƒ¢ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

ç”Ÿæˆã•ã‚ŒãŸãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒãƒ¼ã¯ã€ç°¡å˜ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ã‚ˆã†API URLã«åŸºã¥ã„ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’ä½œæˆã—ã¾ã™ï¼š

```
generated/
â”œâ”€â”€ mocks/
â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”œâ”€â”€ get.json          # GET /users
â”‚   â”‚   â””â”€â”€ post.json         # POST /users
â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â””â”€â”€ _id/
â”‚   â”‚       â”œâ”€â”€ get.json      # GET /users/{id}
â”‚   â”‚       â””â”€â”€ put.json      # PUT /users/{id}
â”‚   â””â”€â”€ users/
â”‚       â””â”€â”€ _id/
â”‚           â””â”€â”€ posts/
â”‚               â””â”€â”€ get.json  # GET /users/{id}/posts
â”œâ”€â”€ openapi.json              # OpenAPIä»•æ§˜
â””â”€â”€ mock-config.json          # ã‚µãƒ¼ãƒãƒ¼è¨­å®š
```

### ãƒ¢ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

å„ãƒ¢ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€ç•°ãªã‚‹HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒå«ã¾ã‚Œã¾ã™ï¼š

```json
{
  "200": {
    "id": 1,
    "name": "ç”°ä¸­å¤ªéƒ",
    "email": "tanaka@example.com"
  },
  "404": {
    "error": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"
  }
}
```

ã‚µãƒ¼ãƒãƒ¼ã¯ã€OpenAPIä»•æ§˜ã¨ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ã„ã¦é©åˆ‡ãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è‡ªå‹•çš„ã«æä¾›ã—ã¾ã™ã€‚

## ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆæˆ¦ç•¥

1. **ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«** - ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€ãã‚ŒãŒä½¿ç”¨ã•ã‚Œã¾ã™
2. **OpenAPIã®ä¾‹** - OpenAPIä»•æ§˜ã§ä¾‹ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãã‚ŒãŒä½¿ç”¨ã•ã‚Œã¾ã™
3. **ã‚¹ã‚­ãƒ¼ãƒã‹ã‚‰ç”Ÿæˆ** - ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã«åŸºã¥ã„ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒç”Ÿæˆã•ã‚Œã¾ã™

## é–‹ç™º

### è¦ä»¶

- Node.js >= 16.0.0
- npm ã¾ãŸã¯ yarn

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/yourusername/open-api-nice-mock.git
cd open-api-nice-mock

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:coverage

# ãƒªãƒ³ã‚¿ãƒ¼ã‚’å®Ÿè¡Œ
npm run lint
```

### ãƒ†ã‚¹ãƒˆ

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯80%ä»¥ä¸Šã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ç¶­æŒã—ã¦ã„ã¾ã™ã€‚ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã‚’å®Ÿè¡Œï¼š

```bash
# å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
npm run test:coverage
```

## è²¢çŒ®

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆï¼ˆ`git checkout -b feature/amazing-feature`ï¼‰
3. å¤‰æ›´ã‚’åŠ ãˆã‚‹
4. å¤‰æ›´ã«å¯¾ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
5. ãƒ†ã‚¹ãƒˆãŒé€šã‚Šã€ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ80%ä»¥ä¸Šã‚’ç¶­æŒã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
6. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆï¼ˆ`git commit -m 'Add some amazing feature'`ï¼‰
7. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆ`git push origin feature/amazing-feature`ï¼‰
8. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯[LICENSE](LICENSE)ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## å¤‰æ›´å±¥æ­´

å¤‰æ›´ã®ãƒªã‚¹ãƒˆã«ã¤ã„ã¦ã¯[CHANGELOG.md](CHANGELOG.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚